databaseChangeLog:
  - changeSet:
      id: 051-upsert-more-countries
      author: Mohamed Osman
      changes:
        - sql:
            sql: |
              INSERT INTO countries (code, name, currency_code, has_regional_tax, rate_source, tax_system_json, regions_json)
              VALUES
                ('FR', 'France', 'EUR', false, 'ECB', '{"authority":"DGFiP","taxYear":"2025","brackets":[{"min":0,"max":11497,"rate":0,"baseTax":0},{"min":11497,"max":29315,"rate":0.11,"baseTax":0},{"min":29315,"max":83823,"rate":0.30,"baseTax":1960},{"min":83823,"max":180294,"rate":0.41,"baseTax":18312},{"min":180294,"max":1.7976931348623157E308,"rate":0.45,"baseTax":57765}],"deductions":[{"type":"personal_allowance","amount":11497}]}', '[]'),
                ('IT', 'Italy', 'EUR', true, 'ECB', '{"authority":"Agenzia delle Entrate","taxYear":"2025","brackets":[{"min":0,"max":28000,"rate":0.23,"baseTax":0},{"min":28000,"max":50000,"rate":0.35,"baseTax":6440},{"min":50000,"max":1.7976931348623157E308,"rate":0.43,"baseTax":14140}],"deductions":[{"type":"no_tax_area","amount":8500}]}', '[{"code":"LOM","name":"Lombardy","brackets":[]},{"code":"LAZ","name":"Lazio","brackets":[]},{"code":"VEN","name":"Veneto","brackets":[]}]'),
                ('ES', 'Spain', 'EUR', true, 'ECB', '{"authority":"AEAT","taxYear":"2025","brackets":[{"min":0,"max":12450,"rate":0.19,"baseTax":0},{"min":12450,"max":20200,"rate":0.24,"baseTax":2365.50},{"min":20200,"max":35200,"rate":0.30,"baseTax":4225.50},{"min":35200,"max":60000,"rate":0.37,"baseTax":8725.50},{"min":60000,"max":300000,"rate":0.45,"baseTax":17901.50},{"min":300000,"max":1.7976931348623157E308,"rate":0.47,"baseTax":125901.50}],"deductions":[{"type":"personal_minimum","amount":5550}]}', '[{"code":"MAD","name":"Madrid","brackets":[]},{"code":"CAT","name":"Catalonia","brackets":[]},{"code":"AND","name":"Andalusia","brackets":[]}]'),
                ('NL', 'Netherlands', 'EUR', false, 'ECB', '{"authority":"Belastingdienst","taxYear":"2025","brackets":[{"min":0,"max":38441,"rate":0.3697,"baseTax":0},{"min":38441,"max":75518,"rate":0.3697,"baseTax":14210},{"min":75518,"max":1.7976931348623157E308,"rate":0.495,"baseTax":27920}],"deductions":[{"type":"heffingskorting","amount":3362}]}', '[]'),
                ('JP', 'Japan', 'JPY', true, 'BOJ', '{"authority":"NTA","taxYear":"2025","brackets":[{"min":0,"max":1950000,"rate":0.05,"baseTax":0},{"min":1950000,"max":3300000,"rate":0.10,"baseTax":97500},{"min":3300000,"max":6950000,"rate":0.20,"baseTax":232500},{"min":6950000,"max":9000000,"rate":0.23,"baseTax":962500},{"min":9000000,"max":18000000,"rate":0.33,"baseTax":1434000},{"min":18000000,"max":40000000,"rate":0.40,"baseTax":4404000},{"min":40000000,"max":1.7976931348623157E308,"rate":0.45,"baseTax":13204000}],"deductions":[{"type":"basic_deduction","amount":480000}]}', '[{"code":"TKY","name":"Tokyo","brackets":[]},{"code":"OSK","name":"Osaka","brackets":[]},{"code":"KYT","name":"Kyoto","brackets":[]}]'),
                ('KR', 'South Korea', 'KRW', true, 'BOK', '{"authority":"NTS","taxYear":"2025","brackets":[{"min":0,"max":14000000,"rate":0.06,"baseTax":0},{"min":14000000,"max":50000000,"rate":0.15,"baseTax":840000},{"min":50000000,"max":88000000,"rate":0.24,"baseTax":6240000},{"min":88000000,"max":150000000,"rate":0.35,"baseTax":15360000},{"min":150000000,"max":300000000,"rate":0.38,"baseTax":37060000},{"min":300000000,"max":500000000,"rate":0.40,"baseTax":94060000},{"min":500000000,"max":1000000000,"rate":0.42,"baseTax":174060000},{"min":1000000000,"max":1.7976931348623157E308,"rate":0.45,"baseTax":384060000}],"deductions":[{"type":"basic_deduction","amount":1500000}]}', '[{"code":"SEO","name":"Seoul","brackets":[]},{"code":"BSN","name":"Busan","brackets":[]}]'),
                ('IN', 'India', 'INR', false, 'RBI', '{"authority":"CBDT","taxYear":"2025-26","brackets":[{"min":0,"max":300000,"rate":0,"baseTax":0},{"min":300000,"max":700000,"rate":0.05,"baseTax":0},{"min":700000,"max":1000000,"rate":0.10,"baseTax":20000},{"min":1000000,"max":1200000,"rate":0.15,"baseTax":50000},{"min":1200000,"max":1500000,"rate":0.20,"baseTax":80000},{"min":1500000,"max":1.7976931348623157E308,"rate":0.30,"baseTax":140000}],"deductions":[{"type":"standard_deduction","amount":75000}]}', '[]'),
                ('BR', 'Brazil', 'BRL', false, 'BCB', '{"authority":"Receita Federal","taxYear":"2025","brackets":[{"min":0,"max":26963.20,"rate":0,"baseTax":0},{"min":26963.20,"max":33919.80,"rate":0.075,"baseTax":0},{"min":33919.80,"max":45012.60,"rate":0.15,"baseTax":521.75},{"min":45012.60,"max":55976.16,"rate":0.225,"baseTax":1685.66},{"min":55976.16,"max":1.7976931348623157E308,"rate":0.275,"baseTax":4152.46}],"deductions":[{"type":"dependente","amount":2275.08}]}', '[]'),
                ('MX', 'Mexico', 'MXN', false, 'BANXICO', '{"authority":"SAT","taxYear":"2025","brackets":[{"min":0,"max":8952.49,"rate":0.0192,"baseTax":0},{"min":8952.49,"max":75984.55,"rate":0.0640,"baseTax":171.88},{"min":75984.55,"max":133536.07,"rate":0.1088,"baseTax":4461.94},{"min":133536.07,"max":155229.80,"rate":0.16,"baseTax":10723.55},{"min":155229.80,"max":185852.57,"rate":0.1792,"baseTax":14194.54},{"min":185852.57,"max":374837.88,"rate":0.2136,"baseTax":19682.13},{"min":374837.88,"max":590795.99,"rate":0.2352,"baseTax":60049.40},{"min":590795.99,"max":1127926.84,"rate":0.30,"baseTax":110842.74},{"min":1127926.84,"max":1503902.46,"rate":0.32,"baseTax":271981.99},{"min":1503902.46,"max":4511707.37,"rate":0.34,"baseTax":392294.17},{"min":4511707.37,"max":1.7976931348623157E308,"rate":0.35,"baseTax":1414947.85}],"deductions":[{"type":"personal_deduction","amount":107046}]}', '[]'),
                ('CH', 'Switzerland', 'CHF', true, 'SNB', '{"authority":"ESTV","taxYear":"2025","brackets":[{"min":0,"max":18300,"rate":0,"baseTax":0},{"min":18300,"max":31600,"rate":0.0077,"baseTax":0},{"min":31600,"max":41400,"rate":0.0088,"baseTax":102.41},{"min":41400,"max":55200,"rate":0.0264,"baseTax":188.65},{"min":55200,"max":72500,"rate":0.0297,"baseTax":553.01},{"min":72500,"max":78100,"rate":0.0561,"baseTax":1066.72},{"min":78100,"max":103600,"rate":0.0666,"baseTax":1380.94},{"min":103600,"max":134600,"rate":0.0888,"baseTax":3079.17},{"min":134600,"max":176000,"rate":0.1098,"baseTax":5833.89},{"min":176000,"max":755300,"rate":0.1298,"baseTax":10380.57},{"min":755300,"max":1.7976931348623157E308,"rate":0.135,"baseTax":85556.53}],"deductions":[{"type":"personal_allowance","amount":18300}]}', '[{"code":"ZH","name":"Zurich","brackets":[]},{"code":"GE","name":"Geneva","brackets":[]},{"code":"BS","name":"Basel","brackets":[]}]'),
                ('SE', 'Sweden', 'SEK', true, 'Riksbank', '{"authority":"Skatteverket","taxYear":"2025","brackets":[{"min":0,"max":614000,"rate":0.32,"baseTax":0},{"min":614000,"max":1.7976931348623157E308,"rate":0.52,"baseTax":196480}],"deductions":[{"type":"jobbskatteavdrag","amount":40000}]}', '[{"code":"STK","name":"Stockholm","brackets":[]},{"code":"GOT","name":"Gothenburg","brackets":[]},{"code":"MAL","name":"Malmo","brackets":[]}]'),
                ('NO', 'Norway', 'NOK', false, 'Norges Bank', '{"authority":"Skatteetaten","taxYear":"2025","brackets":[{"min":0,"max":217400,"rate":0,"baseTax":0},{"min":217400,"max":306050,"rate":0.017,"baseTax":0},{"min":306050,"max":697050,"rate":0.04,"baseTax":1507.05},{"min":697050,"max":942400,"rate":0.136,"baseTax":17147.05},{"min":942400,"max":1410750,"rate":0.166,"baseTax":50514.61},{"min":1410750,"max":1.7976931348623157E308,"rate":0.176,"baseTax":128259.73}],"deductions":[{"type":"minstefradrag","amount":109950}]}', '[]'),
                ('DK', 'Denmark', 'DKK', true, 'Danmarks Nationalbank', '{"authority":"Skattestyrelsen","taxYear":"2025","brackets":[{"min":0,"max":50000,"rate":0,"baseTax":0},{"min":50000,"max":611800,"rate":0.3766,"baseTax":0},{"min":611800,"max":1.7976931348623157E308,"rate":0.5266,"baseTax":211507.68}],"deductions":[{"type":"personfradrag","amount":50000}]}', '[{"code":"CPH","name":"Copenhagen","brackets":[]},{"code":"AAR","name":"Aarhus","brackets":[]}]'),
                ('NZ', 'New Zealand', 'NZD', false, 'RBNZ', '{"authority":"IRD","taxYear":"2024-25","brackets":[{"min":0,"max":15600,"rate":0.105,"baseTax":0},{"min":15600,"max":53500,"rate":0.175,"baseTax":1638},{"min":53500,"max":78100,"rate":0.30,"baseTax":8270.50},{"min":78100,"max":180000,"rate":0.33,"baseTax":15650.50},{"min":180000,"max":1.7976931348623157E308,"rate":0.39,"baseTax":49277.50}],"deductions":[]}', '[]'),
                ('SG', 'Singapore', 'SGD', false, 'MAS', '{"authority":"IRAS","taxYear":"2025","brackets":[{"min":0,"max":20000,"rate":0,"baseTax":0},{"min":20000,"max":30000,"rate":0.02,"baseTax":0},{"min":30000,"max":40000,"rate":0.035,"baseTax":200},{"min":40000,"max":80000,"rate":0.07,"baseTax":550},{"min":80000,"max":120000,"rate":0.115,"baseTax":3350},{"min":120000,"max":160000,"rate":0.15,"baseTax":7950},{"min":160000,"max":200000,"rate":0.18,"baseTax":13950},{"min":200000,"max":240000,"rate":0.19,"baseTax":21150},{"min":240000,"max":280000,"rate":0.195,"baseTax":28750},{"min":280000,"max":320000,"rate":0.20,"baseTax":36550},{"min":320000,"max":500000,"rate":0.22,"baseTax":44550},{"min":500000,"max":1000000,"rate":0.23,"baseTax":84150},{"min":1000000,"max":1.7976931348623157E308,"rate":0.24,"baseTax":199150}],"deductions":[{"type":"earned_income_relief","amount":1000}]}', '[]'),
                ('HK', 'Hong Kong', 'HKD', false, 'HKMA', '{"authority":"IRD","taxYear":"2024-25","brackets":[{"min":0,"max":50000,"rate":0.02,"baseTax":0},{"min":50000,"max":100000,"rate":0.06,"baseTax":1000},{"min":100000,"max":150000,"rate":0.10,"baseTax":4000},{"min":150000,"max":200000,"rate":0.14,"baseTax":9000},{"min":200000,"max":1.7976931348623157E308,"rate":0.17,"baseTax":16000}],"deductions":[{"type":"basic_allowance","amount":132000}]}', '[]'),
                ('IE', 'Ireland', 'EUR', false, 'ECB', '{"authority":"Revenue","taxYear":"2025","brackets":[{"min":0,"max":44000,"rate":0.20,"baseTax":0},{"min":44000,"max":1.7976931348623157E308,"rate":0.40,"baseTax":8800}],"deductions":[{"type":"personal_tax_credit","amount":1875}]}', '[]'),
                ('PL', 'Poland', 'PLN', false, 'NBP', '{"authority":"KAS","taxYear":"2025","brackets":[{"min":0,"max":30000,"rate":0,"baseTax":0},{"min":30000,"max":120000,"rate":0.12,"baseTax":0},{"min":120000,"max":1.7976931348623157E308,"rate":0.32,"baseTax":10800}],"deductions":[{"type":"kwota_wolna","amount":30000}]}', '[]'),
                ('BE', 'Belgium', 'EUR', true, 'ECB', '{"authority":"SPF Finances","taxYear":"2025","brackets":[{"min":0,"max":15820,"rate":0.25,"baseTax":0},{"min":15820,"max":27920,"rate":0.40,"baseTax":3955},{"min":27920,"max":48320,"rate":0.45,"baseTax":8795},{"min":48320,"max":1.7976931348623157E308,"rate":0.50,"baseTax":17975}],"deductions":[{"type":"quotite_exemptee","amount":10570}]}', '[{"code":"BRU","name":"Brussels","brackets":[]},{"code":"FLA","name":"Flanders","brackets":[]},{"code":"WAL","name":"Wallonia","brackets":[]}]'),
                ('AT', 'Austria', 'EUR', false, 'ECB', '{"authority":"BMF","taxYear":"2025","brackets":[{"min":0,"max":12816,"rate":0,"baseTax":0},{"min":12816,"max":20818,"rate":0.20,"baseTax":0},{"min":20818,"max":34513,"rate":0.30,"baseTax":1600.40},{"min":34513,"max":66612,"rate":0.41,"baseTax":5708.90},{"min":66612,"max":99266,"rate":0.48,"baseTax":18869.49},{"min":99266,"max":1000000,"rate":0.50,"baseTax":34543.41},{"min":1000000,"max":1.7976931348623157E308,"rate":0.55,"baseTax":484910.41}],"deductions":[{"type":"verkehrsabsetzbetrag","amount":463}]}', '[]')
              ON CONFLICT (code) DO NOTHING;
