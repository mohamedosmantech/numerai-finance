import{c as b,j as e,r as l}from"./styles-DOxGpBAc.js";const g="http://localhost:8002";async function p(a,t,s){const i=await(await fetch(`${g}/mcp/messages?sessionId=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"tools/call",params:{name:t,arguments:s}})})).json();if(i.error)throw new Error(i.error.message);return i.result.structuredContent}async function v(){return new Promise((a,t)=>{const s=new EventSource(`${g}/mcp`);s.addEventListener("endpoint",o=>{const i=o.data,c=new URLSearchParams(i.split("?")[1]).get("sessionId");c&&a(c)}),s.onerror=()=>t(new Error("Failed to connect")),setTimeout(()=>t(new Error("Connection timeout")),5e3)})}const r=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a);function f(){const[a,t]=l.useState({principal:3e5,annualRate:6.5,years:30}),[s,o]=l.useState(null),[i,c]=l.useState(!1),[d,m]=l.useState(null),u=l.useCallback(async()=>{c(!0),m(null);try{const n=await v(),j=await p(n,"calculate_loan_payment",a);o(j.result)}catch(n){m(n instanceof Error?n.message:"Calculation failed")}finally{c(!1)}},[a]),h=s?a.principal/s.totalPayment*100:50,x=s?s.totalInterest/s.totalPayment*100:50;return e.jsxs("div",{className:"fincalc-widget loan-calculator",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"icon",children:"ðŸ "}),e.jsx("h2",{children:"Loan Payment Calculator"})]}),e.jsxs("div",{className:"input-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Loan Amount ($)"}),e.jsx("input",{type:"number",value:a.principal,onChange:n=>t({...a,principal:Number(n.target.value)}),min:1e3,max:1e7})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Interest Rate (%)"}),e.jsx("input",{type:"number",value:a.annualRate,onChange:n=>t({...a,annualRate:Number(n.target.value)}),min:0,max:30,step:.125})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Term (years)"}),e.jsx("input",{type:"number",value:a.years,onChange:n=>t({...a,years:Number(n.target.value)}),min:1,max:50})]}),e.jsx("button",{onClick:u,disabled:i,className:"calculate-btn",children:i?"Calculating...":"Calculate"})]}),d&&e.jsx("div",{className:"error-message",children:d}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"result-highlight",children:[e.jsx("div",{className:"label",children:"Monthly Payment"}),e.jsx("div",{className:"amount",children:r(s.monthlyPayment)})]}),e.jsxs("div",{className:"breakdown",children:[e.jsx("h3",{children:"Payment Breakdown"}),e.jsxs("div",{className:"bar-chart",children:[e.jsx("div",{className:"bar principal",style:{width:`${h}%`}}),e.jsx("div",{className:"bar interest",style:{width:`${x}%`}})]}),e.jsxs("div",{className:"legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"dot principal"}),e.jsxs("span",{children:["Principal: ",r(a.principal)]})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"dot interest"}),e.jsxs("span",{children:["Interest: ",r(s.totalInterest)]})]})]})]}),e.jsx("div",{className:"totals",children:e.jsxs("div",{className:"total-item",children:[e.jsxs("span",{className:"label",children:["Total of ",a.years*12," Payments"]}),e.jsx("span",{className:"value",children:r(s.totalPayment)})]})})]})]})}function y(){const[a,t]=l.useState({principal:1e4,annualRate:7,years:20,compoundingFrequency:12,monthlyContribution:500}),[s,o]=l.useState(null),[i,c]=l.useState(!1),[d,m]=l.useState(null),u=l.useCallback(async()=>{c(!0),m(null);try{const n=await v(),j=await p(n,"calculate_compound_interest",a);o(j.result)}catch(n){m(n instanceof Error?n.message:"Calculation failed")}finally{c(!1)}},[a]),h=s?s.totalContributions/s.futureValue*100:50,x=s?s.totalInterestEarned/s.futureValue*100:50;return e.jsxs("div",{className:"fincalc-widget compound-interest",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"icon",children:"ðŸ“ˆ"}),e.jsx("h2",{children:"Investment Growth Calculator"})]}),e.jsxs("div",{className:"input-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Initial Investment ($)"}),e.jsx("input",{type:"number",value:a.principal,onChange:n=>t({...a,principal:Number(n.target.value)}),min:0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Annual Return (%)"}),e.jsx("input",{type:"number",value:a.annualRate,onChange:n=>t({...a,annualRate:Number(n.target.value)}),min:0,max:50,step:.5})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Years"}),e.jsx("input",{type:"number",value:a.years,onChange:n=>t({...a,years:Number(n.target.value)}),min:1,max:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Monthly Contribution ($)"}),e.jsx("input",{type:"number",value:a.monthlyContribution,onChange:n=>t({...a,monthlyContribution:Number(n.target.value)}),min:0})]}),e.jsx("button",{onClick:u,disabled:i,className:"calculate-btn",children:i?"Calculating...":"Calculate"})]}),d&&e.jsx("div",{className:"error-message",children:d}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"result-highlight",children:[e.jsx("div",{className:"label",children:"Future Value"}),e.jsx("div",{className:"amount",children:r(s.futureValue)})]}),e.jsxs("div",{className:"breakdown",children:[e.jsx("h3",{children:"Value Breakdown"}),e.jsxs("div",{className:"bar-chart",children:[e.jsx("div",{className:"bar contributions",style:{width:`${h}%`}}),e.jsx("div",{className:"bar earnings",style:{width:`${x}%`}})]}),e.jsxs("div",{className:"legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"dot contributions"}),e.jsxs("span",{children:["Contributions: ",r(s.totalContributions)]})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"dot earnings"}),e.jsxs("span",{children:["Interest Earned: ",r(s.totalInterestEarned)]})]})]})]}),e.jsx("div",{className:"totals",children:e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Effective Annual Rate"}),e.jsxs("span",{className:"value",children:[s.effectiveAnnualRate,"%"]})]})})]})]})}function C(){const[a,t]=l.useState({grossIncome:1e5,filingStatus:"single",deductions:0,state:"CA"}),[s,o]=l.useState(null),[i,c]=l.useState(!1),[d,m]=l.useState(null),u=l.useCallback(async()=>{c(!0),m(null);try{const n=await v(),j=await p(n,"estimate_taxes",a);o(j.result)}catch(n){m(n instanceof Error?n.message:"Calculation failed")}finally{c(!1)}},[a]),h=s?s.takeHomePay/a.grossIncome*100:75,x=s?s.totalTax/a.grossIncome*100:25;return e.jsxs("div",{className:"fincalc-widget tax-estimator",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"icon",children:"ðŸ“Š"}),e.jsx("h2",{children:"Tax Estimator (2024)"})]}),e.jsxs("div",{className:"input-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gross Income ($)"}),e.jsx("input",{type:"number",value:a.grossIncome,onChange:n=>t({...a,grossIncome:Number(n.target.value)}),min:0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Filing Status"}),e.jsxs("select",{value:a.filingStatus,onChange:n=>t({...a,filingStatus:n.target.value}),children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married_joint",children:"Married Filing Jointly"}),e.jsx("option",{value:"married_separate",children:"Married Filing Separately"}),e.jsx("option",{value:"head_of_household",children:"Head of Household"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State"}),e.jsxs("select",{value:a.state,onChange:n=>t({...a,state:n.target.value}),children:[e.jsx("option",{value:"CA",children:"California"}),e.jsx("option",{value:"NY",children:"New York"}),e.jsx("option",{value:"TX",children:"Texas (No State Tax)"}),e.jsx("option",{value:"FL",children:"Florida (No State Tax)"}),e.jsx("option",{value:"WA",children:"Washington (No State Tax)"}),e.jsx("option",{value:"IL",children:"Illinois"}),e.jsx("option",{value:"PA",children:"Pennsylvania"}),e.jsx("option",{value:"GA",children:"Georgia"})]})]}),e.jsx("button",{onClick:u,disabled:i,className:"calculate-btn",children:i?"Calculating...":"Calculate"})]}),d&&e.jsx("div",{className:"error-message",children:d}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"result-highlight take-home",children:[e.jsx("div",{className:"label",children:"Take-Home Pay"}),e.jsx("div",{className:"amount",children:r(s.takeHomePay)})]}),e.jsxs("div",{className:"breakdown",children:[e.jsx("h3",{children:"Income Breakdown"}),e.jsxs("div",{className:"bar-chart",children:[e.jsx("div",{className:"bar contributions",style:{width:`${h}%`}}),e.jsx("div",{className:"bar earnings",style:{width:`${x}%`}})]}),e.jsxs("div",{className:"legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"dot contributions"}),e.jsxs("span",{children:["Take Home: ",r(s.takeHomePay)]})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"dot earnings"}),e.jsxs("span",{children:["Total Tax: ",r(s.totalTax)]})]})]})]}),e.jsxs("div",{className:"totals",children:[e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Taxable Income"}),e.jsx("span",{className:"value",children:r(s.taxableIncome)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Federal Tax"}),e.jsx("span",{className:"value",children:r(s.federalTax)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"State Tax"}),e.jsx("span",{className:"value",children:r(s.stateTax)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Effective Tax Rate"}),e.jsxs("span",{className:"value",children:[s.effectiveRate,"%"]})]})]})]})]})}function I(){const[a,t]=l.useState("loan");return e.jsxs("div",{className:"app-container",children:[e.jsxs("header",{className:"app-header",children:[e.jsx("h1",{children:"ðŸ’° FinCalc Pro"}),e.jsx("p",{children:"Financial Calculator for ChatGPT"})]}),e.jsxs("nav",{className:"tab-nav",children:[e.jsx("button",{className:a==="loan"?"active":"",onClick:()=>t("loan"),children:"ðŸ  Loan"}),e.jsx("button",{className:a==="compound"?"active":"",onClick:()=>t("compound"),children:"ðŸ“ˆ Investment"}),e.jsx("button",{className:a==="tax"?"active":"",onClick:()=>t("tax"),children:"ðŸ“Š Taxes"})]}),e.jsxs("main",{children:[a==="loan"&&e.jsx(f,{}),a==="compound"&&e.jsx(y,{}),a==="tax"&&e.jsx(C,{})]}),e.jsx("footer",{className:"app-footer",children:e.jsxs("p",{children:["MCP Server: ",e.jsx("code",{children:"http://localhost:8002/mcp"})]})})]})}const N=document.getElementById("root");N&&b(N).render(e.jsx(I,{}));
